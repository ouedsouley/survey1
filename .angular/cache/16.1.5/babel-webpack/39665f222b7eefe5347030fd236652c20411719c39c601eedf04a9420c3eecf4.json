{"ast":null,"code":"import _asyncToGenerator from \"D:/ionic/survey-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { WebPlugin } from '@capacitor/core';\nexport class PreferencesWeb extends WebPlugin {\n  constructor() {\n    super(...arguments);\n    this.group = 'CapacitorStorage';\n  }\n  configure({\n    group\n  }) {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      if (typeof group === 'string') {\n        _this.group = group;\n      }\n    })();\n  }\n  get(options) {\n    var _this2 = this;\n    return _asyncToGenerator(function* () {\n      const value = _this2.impl.getItem(_this2.applyPrefix(options.key));\n      return {\n        value\n      };\n    })();\n  }\n  set(options) {\n    var _this3 = this;\n    return _asyncToGenerator(function* () {\n      _this3.impl.setItem(_this3.applyPrefix(options.key), options.value);\n    })();\n  }\n  remove(options) {\n    var _this4 = this;\n    return _asyncToGenerator(function* () {\n      _this4.impl.removeItem(_this4.applyPrefix(options.key));\n    })();\n  }\n  keys() {\n    var _this5 = this;\n    return _asyncToGenerator(function* () {\n      const keys = _this5.rawKeys().map(k => k.substring(_this5.prefix.length));\n      return {\n        keys\n      };\n    })();\n  }\n  clear() {\n    var _this6 = this;\n    return _asyncToGenerator(function* () {\n      for (const key of _this6.rawKeys()) {\n        _this6.impl.removeItem(key);\n      }\n    })();\n  }\n  migrate() {\n    var _this7 = this;\n    return _asyncToGenerator(function* () {\n      var _a;\n      const migrated = [];\n      const existing = [];\n      const oldprefix = '_cap_';\n      const keys = Object.keys(_this7.impl).filter(k => k.indexOf(oldprefix) === 0);\n      for (const oldkey of keys) {\n        const key = oldkey.substring(oldprefix.length);\n        const value = (_a = _this7.impl.getItem(oldkey)) !== null && _a !== void 0 ? _a : '';\n        const {\n          value: currentValue\n        } = yield _this7.get({\n          key\n        });\n        if (typeof currentValue === 'string') {\n          existing.push(key);\n        } else {\n          yield _this7.set({\n            key,\n            value\n          });\n          migrated.push(key);\n        }\n      }\n      return {\n        migrated,\n        existing\n      };\n    })();\n  }\n  removeOld() {\n    var _this8 = this;\n    return _asyncToGenerator(function* () {\n      const oldprefix = '_cap_';\n      const keys = Object.keys(_this8.impl).filter(k => k.indexOf(oldprefix) === 0);\n      for (const oldkey of keys) {\n        _this8.impl.removeItem(oldkey);\n      }\n    })();\n  }\n  get impl() {\n    return window.localStorage;\n  }\n  get prefix() {\n    return this.group === 'NativeStorage' ? '' : `${this.group}.`;\n  }\n  rawKeys() {\n    return Object.keys(this.impl).filter(k => k.indexOf(this.prefix) === 0);\n  }\n  applyPrefix(key) {\n    return this.prefix + key;\n  }\n}","map":{"version":3,"names":["WebPlugin","PreferencesWeb","constructor","arguments","group","configure","_this","_asyncToGenerator","get","options","_this2","value","impl","getItem","applyPrefix","key","set","_this3","setItem","remove","_this4","removeItem","keys","_this5","rawKeys","map","k","substring","prefix","length","clear","_this6","migrate","_this7","_a","migrated","existing","oldprefix","Object","filter","indexOf","oldkey","currentValue","push","removeOld","_this8","window","localStorage"],"sources":["D:/ionic/survey-app/node_modules/@capacitor/preferences/dist/esm/web.js"],"sourcesContent":["import { WebPlugin } from '@capacitor/core';\nexport class PreferencesWeb extends WebPlugin {\n    constructor() {\n        super(...arguments);\n        this.group = 'CapacitorStorage';\n    }\n    async configure({ group }) {\n        if (typeof group === 'string') {\n            this.group = group;\n        }\n    }\n    async get(options) {\n        const value = this.impl.getItem(this.applyPrefix(options.key));\n        return { value };\n    }\n    async set(options) {\n        this.impl.setItem(this.applyPrefix(options.key), options.value);\n    }\n    async remove(options) {\n        this.impl.removeItem(this.applyPrefix(options.key));\n    }\n    async keys() {\n        const keys = this.rawKeys().map(k => k.substring(this.prefix.length));\n        return { keys };\n    }\n    async clear() {\n        for (const key of this.rawKeys()) {\n            this.impl.removeItem(key);\n        }\n    }\n    async migrate() {\n        var _a;\n        const migrated = [];\n        const existing = [];\n        const oldprefix = '_cap_';\n        const keys = Object.keys(this.impl).filter(k => k.indexOf(oldprefix) === 0);\n        for (const oldkey of keys) {\n            const key = oldkey.substring(oldprefix.length);\n            const value = (_a = this.impl.getItem(oldkey)) !== null && _a !== void 0 ? _a : '';\n            const { value: currentValue } = await this.get({ key });\n            if (typeof currentValue === 'string') {\n                existing.push(key);\n            }\n            else {\n                await this.set({ key, value });\n                migrated.push(key);\n            }\n        }\n        return { migrated, existing };\n    }\n    async removeOld() {\n        const oldprefix = '_cap_';\n        const keys = Object.keys(this.impl).filter(k => k.indexOf(oldprefix) === 0);\n        for (const oldkey of keys) {\n            this.impl.removeItem(oldkey);\n        }\n    }\n    get impl() {\n        return window.localStorage;\n    }\n    get prefix() {\n        return this.group === 'NativeStorage' ? '' : `${this.group}.`;\n    }\n    rawKeys() {\n        return Object.keys(this.impl).filter(k => k.indexOf(this.prefix) === 0);\n    }\n    applyPrefix(key) {\n        return this.prefix + key;\n    }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}